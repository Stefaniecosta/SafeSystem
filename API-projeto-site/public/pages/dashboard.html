<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../styles/dashboard.css">
    <script src="https://cdn.zingchart.com/zingchart.min.js"></script>
    <script src="../funcoes.js"></script>
    <title>Área do Cliente</title>
</head>

<body>
    <div id="content">
        <img id="logoName" src="../assets/img/logoss.svg" alt="">

        <div id="options">
            <div class="item">
                <strong class="font_tamanho">
                    Caixas
                </strong>
            </div>

            <hr>

            <div class="item">
                <div>
                    <img src="../assets/img/visaoGeralImg.png" alt="">
                </div>
                <a href="visaogeral.html"> VISÃO GERAL </a>
            </div>

            


        </div>

        <!-- Ícone de SAIR da dashboard -->
        <div id="logout">
            <!-- <a href="/Site/index.html"> -->
                <img id="logoutIcon" onclick="logoff()" placeholder="SAIR" src="../assets/img/logoutIcon.png" alt="Ícone para sair da Dashboard">
            <!-- </a> -->
        </div>
    </div>

    <!-- Header com o título e a foto de perfil com dropdown de opções-->

    <div id="informations">
        <header class="header">
            <strong class="item_color">Dashboard</strong>

            <div class="dropdown">
                <button class="dropbtn">
                    <img id="user" src="../assets/img/user.png" alt="">
                    <div class="dropdown-content">
                        <a href="../pages/dashPerfil.html">Perfil</a>
                        <a href="/Site/index.html">Homepage</a>
                        <a href="../pages/visaogeral.html">Visão Geral</a>
                    </div>
                </button>
            </div>
            <button id="repError" onclick="mostrarCrud()">GERENCIAR CAIXAS</button>
        </header>


        <div id="infoBoxes">
            <div id="identCaixas">
                <div id="textCaixas">
                    <b>Caixa: <span id="numeroDoCaixa">01</span></b>
                </div>
            </div>

            <div id="box3Conexao" class="box">
              <div class="boxContent">
                  <strong>
                      <img id="iconesBox" src="../assets/img/dashboard-img/USB 2.png" alt="" style="width:45px">

                      Dispositivos conectados
                  </strong>
                  <div id="TextdispConect" class="text-box3Conexao">
                      <a id="temCadastrado"></a> <br>
                      <img  class="iconeBox3Conex" src="../assets/img/dashboard-img/IconedispoEstranhoDash.svg" alt="">
                  </div>

              </div>
          </div>

          <div id="box5Visaogeral" class="box2">
              <div class="boxContent">
                <strong>
                  <img id="iconesBox" src="../assets/img/dashboard-img/conexao-icone.png" alt="">

                  Dispositivos Estranhos
              </strong>

                <div id="TextdispEstranhos" style="display: flex;" class="text-box3Conexao text-redBox3">
                  <a id="temEstranho"></a><img id="caveira"  class="iconeBox3Conex" src="../assets/img/dashboard-img/IconeConectDash.svg" alt="">
                  

              </div>
              </div>
          </div>


            <div id="box1ram" class="box">
                <div class="boxContent">
                    <strong>
                        <img id="iconesBox" src="../assets/img/dashboard-img/ram-icone.png" alt=""> RAM
                    </strong>
                    <div id="chartRAM" class="chartRAM" style="display: block;"></div>
                    <div class="esconderRam"></div>
                </div>
            </div>

            <div id="box2disco" class="box">
                <div class="boxContent">
                    <strong>
                        <img id="iconesBox" src="../assets/img/dashboard-img/disco-icone.png" alt="">
                        Disco
                    </strong>
                    <div class="BoxTextdisco">
                        <div id="textoDisco">
                            
                            <a  id="quantidadeDisco"></a>
                            <a style="font-size: 17px; color: white;">Armazenamento total</a>

                        </div>
                    </div>
                    <div id="chartdivDisco" class="chartDisco" style="display: block;"></div>
                    <div class="esconderDisco"></div>

                </div>
            </div>


            <div id="box6CPU" class="box">
                <div class="boxContent">
                    <strong>
                        <img id="iconesBox" src="../assets/img/dashboard-img/cpu-icone.png" alt="">
                        CPU
                    </strong>
                    <div class="labelCPU">
                        <a href="">Media do uso da cpu por data: </a>
                    </div>
                    <div class="boxDivsgraf">
                        <div class="divGraficCPU">
                            <div id="chartCPU" class="chart-cpu" style="display: block;"> </div>
                            <div class="esconderCPU"></div>
                        </div>
                        <div class="textInfosCPU">
                            <div class="textCPU">
                                <div class="tittleinfosCPU">
                                    <a>Utilização atual da cpu:</a>
                                </div>
                                <div id="mudarInfo1">
                                    <a id="usoDaCpu"></a>
                                    
                                </div>
                            </div>
                            <div class="textCPU">
                                <div class="tittleinfosCPU">
                                    <a>Velocidade:</a>
                                </div>
                                <a id="velocidadeDaCpu"></a>
                            </div>
                            <div class="textCPU">
                                <div class="tittleinfosCPU">
                                    <a>Processador:</a>
                                </div>
                                <div id="mudarInfo4">
                                    <a id="nomeProcessador"></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="box6CPU" class="box" style="width: 46%;">
              <div class="boxContent">
                  <strong>
                    <img id="iconesBox" src="../assets/img/dashboard-img/ram-icone.png" alt=""> RAM
                  </strong>
                  <div class="labelCPU" style="text-align: center; margin: 0; width: 100%;">
                      <a href="">Media do uso de RAM por data: </a>
                  </div>
                  <div class="boxDivsgraf" style="width: 100%; display: block;">
                      <div class="divGraficCPU'" style="width: 100%;">
                          <div id="chartMediaRam" class="chart-cpu" style="display: block;"> </div>
                          
                      </div>
                      
                  </div>
              </div>
          </div>

          <div id="box6CPU" class="box" style="width: 46%;">
            <div class="boxContent">
                <strong>
                  <img id="iconesBox" src="../assets/img/dashboard-img/disco-icone.png" alt="">
                  Disco
                </strong>
                <div class="labelCPU" style="text-align: center; margin: 0; width: 100%;">
                    <a href="">Media do uso de Disco por data: </a>
                </div>
                <div class="boxDivsgraf" style="width: 100%; display: block;">
                    <div class="divGraficCPU'" style="width: 100%;">
                        <div id="chartMediaDisco" class="chart-cpu" style="display: block;"> </div>
                        
                    </div>
                    
                </div>
            </div>
        </div>
            <footer></footer>
</body>

<!-- Resources -->
<script src="https://cdn.amcharts.com/lib/4/core.js"></script>
<script src="https://cdn.amcharts.com/lib/4/charts.js"></script>
<script src="https://cdn.amcharts.com/lib/4/themes/dark.js"></script>
<script src="https://cdn.amcharts.com/lib/4/themes/animated.js">
</script>
<script src="../scripts/graficosDashboard/chamarGraficos.js"></script>
<!-- <script src="../scripts/graficosDashboard/graficosCpu.js"></script>
<script src="../scripts/graficosDashboard/graficosDisco.js"></script>
<script src="../scripts/graficosDashboard/graficosRam.js"></script> -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<script>

  let dadosCPU;
  let dadosRAM;
  let dadosDISCO;

    function setNumeroCaixaAutomatico()
    {
        numeroDoCaixa.innerHTML = '0'+sessionStorage.getItem('idCaixaArmazenado');
    }

    setNumeroCaixaAutomatico();
    
    let quantidadeDeCaixas = 0;

    let idDasMaquinas = [];

    function setarNumeroCaixa(numero)
    {
        numeroDoCaixa.innerHTML = '0'+numero;
    }

    pegarQuantidadeCaixas()

    function plotarCaixasNaTela()
    {
        options.innerHTML += `<hr>`;
        for (let index = 0; index < quantidadeDeCaixas; index++) {
            options.innerHTML +=
            `

            <div onclick="chamarGraf(${idDasMaquinas[index]}), setarNumeroCaixa(${index+1})" class="item" style="cursor: pointer;">
                <img src="../assets/img/caixaIcon.png" alt="">
                
                    
                       <span style="cursor: pointer;">CAIXA <strong id="numeroCaixa">${index+1}</strong></span> 
                    </button>
                
            </div>

            <hr>
            `;
        }
        options.innerHTML +=
        `
        <div class="item item_color">
                <span>
                    Agência
                </span>
                <br>
                <strong>
                    0222
                </strong>
            </div>
            <hr>
        `;
    }



    function pegarQuantidadeCaixas() 
    {

        const idAgencia = sessionStorage.getItem('idAgencia');
        
            fetch(`/agencias/obterQuantidadeDeCaixas/${idAgencia}`, {
                method: "post",
            }).then(resposta => {
    
                if (resposta.ok) {
    
                    resposta.json().then(json => {

                        console.log(`Quantidade de caixas: ${json.length}`);
                        quantidadeDeCaixas = json.length;

                        for (let index = 0; index < json.length; index++) {
                            idDasMaquinas.push(json[index].idMaquina);
                        }

                        plotarCaixasNaTela();
                    });
    
                } else {
    
                    console.log('Erro de login!');
    
                    resposta.text().then(texto => {
                        console.error(texto);
                        alert(texto);
                    });
                }
            });
            return false;
       
    }

  
    let totalRam;
    let usoRam;
    let totalDisco;
    let usoDisco;
    let dispositivoEstranho;
    let usoCpu;
    let nomeCpu;
    let frequenciaCPU;

let teste;

function obterTotalRamENomeProcessador(idMaquina)
{
  fetch(`/agencias/obterProcessadorERam/${idMaquina}`, {
                method: "post",
            }).then(resposta => {
    
                if (resposta.ok) {
    
                    resposta.json().then(json => {

                        console.log(`resultado: ${json[0].totalRam}, ${json[0].processador}`);
                        totalRam = json[0].totalRam;
                        nomeCpu = json[0].processador;
                        totalDisco = json[0].espacoTotal;
                                              
                    });
    
                } else {
    
                    console.log('Erro ao obter processador e total de ram!');
    
                    resposta.text().then(texto => {
                        console.error(texto);
                        alert(texto);
                    });
                }
            });
            return false;
}

function obterEspacoTotal(idMaquina)
{
  fetch(`/agencias/obterEspacoTotal/${idMaquina}`, {
                method: "post",
            }).then(resposta => {
    
                if (resposta.ok) {
    
                    resposta.json().then(json => {

                        console.log(`resultado: ${json[0].totalDisco}`);
                        
                        
                        totalDisco = json[0].totalDisco.toFixed(0);
                        quantidadeDisco.innerHTML = `${totalDisco} GB`
                                              
                    });
    
                } else {
    
                    console.log(`Erro ao obter o espaço total do caixa de id ${idMaquina}!`);
    
                    resposta.text().then(texto => {
                        console.error(texto);
                        alert(texto);
                    });
                }
            });
            return false;
}

function zerarInfos()
{
  usoDaCpu.innerHTML = '';
  velocidadeDaCpu.innerHTML = '';
  nomeProcessador.innerHTML = '';
  quantidadeDisco.innerHTML = '';
  temEstranho.innerHTML = '';
  temCadastrado.innerHTML = '';
}

function chamarGraf(idMaquina)
{
    zerarGraficoCpu();
    zerarGraficoRam();
    zerarGraficoDisco();
    zerarGraficoMediaDisco();
    zerarGraficoMediaRam();
    zerarInfos();
    obterTotalRamENomeProcessador(idMaquina);
    obterDispositivoEstranho(idMaquina);
    obterDispositivosCadastrados(idMaquina);
    obterEspacoTotal(idMaquina);
    plotargraficoMediaCpu(idMaquina);
    plotargraficoMediaRam(idMaquina);
    plotargraficoMediaDisco(idMaquina)
    
    clearInterval(timer);
    timer = setInterval(() => {
        fetch(`/agencias/obterRegistrosDasMaquinas/${idMaquina}`, {
            method: "post",
        }).then(resposta => {
    
            if (resposta.ok) {
    
              resposta.json().then(json => {
    
                    usoRam = json[0].usoRam;
                    usoCpu = json[0].usoCPU;
                    usoDisco = json[0].usoDisco.toFixed(0);
                    frequenciaCPU = json[0].frequenciaCPU;

                    usoDaCpu.innerHTML = usoCpu;
                    velocidadeDaCpu.innerHTML = `${frequenciaCPU.toFixed(2)} GHz`;
                    nomeProcessador.innerHTML = nomeCpu;

                    plotarGraficoRam(); 
                    plotarGraficoDisco();
                    // plotarGraficoCpu();

                    obterDispositivoEstranho(idMaquina);
                    obterDispositivosCadastrados(idMaquina);

                    console.log(json[0]);

                    
    
                });
    
            } else {
    
                console.log('Erro ao obter registro');
    
                resposta.text().then(texto => {
                    console.error(texto);
                    alert(texto);
                    clearInterval(timer);
                });
            }
        });
        return false;
    }, 5000);
    
}

function obterDispositivoEstranho(idMaquina)
{
  fetch(`/agencias/obterDispositivoEstranho/${idMaquina}`, {
                method: "post",
            }).then(resposta => {
    
                if (resposta.ok) {
    
                    resposta.json().then(json => {
                      console.log('chegando dispositivos estranhos!')
                      console.log("alertando length de json: " + json.length)
                      console.log(json[0])
                      if (json == 0) {
                        temEstranho.style.color = 'white';
                        temEstranho.innerHTML = 'Sem dispositivos estranhos detectados!';
                        caveira.style.display = 'none';
                      } else {
                        temEstranho.style.color = 'red';
                        temEstranho.innerHTML = '<h3>ATENÇÃO<br>dispositivo estranho detectado!</h3>'
                        caveira.style.display = 'block';
                      }                       
                                              
                    });
    
                } else {
    
                    console.log('Erro ao obter dispositivos estranhos!');
    
                    resposta.text().then(texto => {
                        console.error(texto);
                        alert(texto);
                    });
                }
            });
            return false;
}

function obterDispositivosCadastrados(idMaquina)
{
  fetch(`/agencias/obterDispositivosCadastrados/${idMaquina}`, {
                method: "post",
            }).then(resposta => {
    
                if (resposta.ok) {
    
                    resposta.json().then(json => {
                      console.log('chegando dispositivos cadastrados!')
                      console.log("<h3>alertando quantidade de dispositivos cadastrados: </3>" + json.length)
                      if (json == 0) {
                        temCadastrado.innerHTML = 'Este caixa não possui<br> dispositivos conectados!';
                      } else if (json == 1){
                        temCadastrado.innerHTML = `${json.length} Cadastrado` ;
                      } else {
                        temCadastrado.innerHTML = `${json.length} Cadastrados`;
                      }                              
                                              
                    });
    
                } else {
    
                    console.log('Erro ao obter dispositivos estranhos!');
    
                    resposta.text().then(texto => {
                        console.error(texto);
                        alert(texto);
                    });
                }
            });
            return false;
}

let idMaquinaPrimeiraVez = sessionStorage.getItem('idMaquina');

let timer;

function chamarGrafPelaPrimeiraVez(idMaquinaPrimeiraVez)
{
        fetch(`/agencias/obterRegistrosDasMaquinas/${idMaquinaPrimeiraVez}`, {
            method: "post",
        }).then(resposta => {
    
            if (resposta.ok) {
    
              resposta.json().then(json => {
    
                    // totalRam = json[0].totalRam;
                    // usoRam = json[0].usoRam;
                    // totalDisco = json[0].totalDisco;
                    // dispositivoEstranho = json[0].dispositivoEstranho;
                    // nomeCpu = json[0].nomeCPU;
                    // usoCpu = json[0].usoCPU;

                    // usoDaCpu.innerHTML = usoCpu;
                    // velocidadeDaCpu.innerHTML = "A definir";
                    // quantidadeDeThreads.innerHTML = "A definir";
                    // nomeProcessador.innerHTML = nomeCpu;
    
                    // console.log(json[0]);

                    
                       chamarGraf(idMaquinaPrimeiraVez); 
                   
    
                });
    
            } else {
    
                console.log('Erro ao obter registro');
    
                resposta.text().then(texto => {
                    console.error(texto);
                    alert(texto);
                });
            }
        });
        return false;
    
}



chamarGrafPelaPrimeiraVez(idMaquinaPrimeiraVez);

setTimeout(() => {
   plotarGraficoRam(); 
   plotarGraficoDisco();
   //plotarGraficoCpu();
}, 500);




function plotarGraficoRam()
{



am4core.ready(function () {

    // Themes begin
    am4core.useTheme(am4themes_dark);
    am4core.useTheme(am4themes_animated);
    // Themes end

    // Create chart instance


    var chart = am4core.create("chartRAM", am4charts.PieChart);

    // Set data
    var selected;
    var types = [{
        type: "Utilizado",
        percent: usoRam,
        color: chart.colors.getIndex(0),
        // subs: [{
        //     type: "Oil",
        //     percent: 15
        // }, {
        //     type: "Coal",
        //     percent: 35
        // }, {
        //     type: "Nuclear",
        //     percent: 20
        // }]
    }, {
        type: "Disponivel",
        percent: totalRam - usoRam,
        color: chart.colors.getIndex(1),
        // subs: [{
        //     type: "Hydro",
        //     percent: 15
        // }, {
        //     type: "Wind",
        //     percent: 10
        // }, {
        //     type: "Other",
        //     percent: 5
        // }]
    }];

    // Add data
    chart.data = generateChartData();

    // Add and configure Series
    var pieSeries = chart.series.push(new am4charts.PieSeries());
    pieSeries.dataFields.value = "percent";
    pieSeries.dataFields.category = "type";
    pieSeries.slices.template.propertyFields.fill = "color";
    pieSeries.slices.template.propertyFields.isActive = "pulled";
    pieSeries.slices.template.strokeWidth = 0;

    function generateChartData() {
        var chartData = [];
        for (var i = 0; i < types.length; i++) {
            if (i == selected) {
                for (var x = 0; x < types[i].subs.length; x++) {
                    chartData.push({
                        type: types[i].subs[x].type,
                        percent: types[i].subs[x].percent,
                        color: types[i].color,
                        pulled: true
                    });
                }
            } else {
                chartData.push({
                    type: types[i].type,
                    percent: types[i].percent,
                    color: types[i].color,
                    id: i
                });
            }
        }
        return chartData;
    }

    pieSeries.slices.template.events.on("hit", function (event) {
        if (event.target.dataItem.dataContext.id != undefined) {
            selected = event.target.dataItem.dataContext.id;
        } else {
            selected = undefined;
        }
        chart.data = generateChartData();
    });

}); // end am4core.ready()

}


function plotarGraficoDisco()
{

quantidadeDisco.innerHTML = `${totalDisco} GB`


am4core.ready(function () {

    // Themes begin
    am4core.useTheme(am4themes_dark);
    am4core.useTheme(am4themes_animated);
    // Themes end

    // Create chart instance
    var chart = am4core.create("chartdivDisco", am4charts.PieChart);
    chart.startAngle = 160;
    chart.endAngle = 380;

    // Let's cut a hole in our Pie chart the size of 40% the radius
    chart.innerRadius = am4core.percent(40);

    // Add data
    chart.data = [
        {
            "country": "Livre",
            "litres": totalDisco - usoDisco,
            "bottles": totalDisco - usoDisco
        },

        //   {  "country": "Ireland",
        //     "litres": 201.1,
        //     "bottles": 785
        // }, {
        //     "country": "Germany",
        //     "litres": 165.8,
        //     "bottles": 255
        // 
        {
            "country": "Em uso",
            "litres": usoDisco,
            "bottles": usoDisco
        }
        // , {
        //     "country": "Austria",
        //     "litres": 128.3,
        //     "bottles": 332
        // }, {
        //     "country": "UK",
        //     "litres": 99,
        //     "bottles": 150
        // }, {
        //     "country": "Belgium",
        //     "litres": 60,
        //     "bottles": 178
        // }, {
        //     "country": "The Netherlands",
        //     "litres": 50,
        //     "bottles": 50
        // }
    ];

    // Add and configure Series
    var pieSeries = chart.series.push(new am4charts.PieSeries());
    pieSeries.dataFields.value = "litres";
    pieSeries.dataFields.category = "country";
    pieSeries.slices.template.stroke = new am4core.InterfaceColorSet().getFor("background");
    pieSeries.slices.template.strokeWidth = 1;
    pieSeries.slices.template.strokeOpacity = 1;

    // Disabling labels and ticks on inner circle
    pieSeries.labels.template.disabled = true;
    pieSeries.ticks.template.disabled = true;

    // Disable sliding out of slices
    pieSeries.slices.template.states.getKey("hover").properties.shiftRadius = 0;
    pieSeries.slices.template.states.getKey("hover").properties.scale = 1;
    pieSeries.radius = am4core.percent(40);
    pieSeries.innerRadius = am4core.percent(30);

    var cs = pieSeries.colors;
    cs.list = [am4core.color(new am4core.ColorSet().getIndex(0))];

    cs.stepOptions = {
        lightness: -0.05,
        hue: 0
    };
    cs.wrap = false;


    // Add second series
    var pieSeries2 = chart.series.push(new am4charts.PieSeries());
    pieSeries2.dataFields.value = "bottles";
    pieSeries2.dataFields.category = "country";
    pieSeries2.slices.template.stroke = new am4core.InterfaceColorSet().getFor("background");
    pieSeries2.slices.template.strokeWidth = 1;
    pieSeries2.slices.template.strokeOpacity = 1;
    pieSeries2.slices.template.states.getKey("hover").properties.shiftRadius = 0.05;
    pieSeries2.slices.template.states.getKey("hover").properties.scale = 1;

    pieSeries2.labels.template.disabled = true;
    pieSeries2.ticks.template.disabled = true;


    var label = chart.seriesContainer.createChild(am4core.Label);
    label.textAlign = "middle";
    label.horizontalCenter = "middle";
    label.verticalCenter = "middle";
    label.adapter.add("text", function (text, target) {
        return "[font-size:18px]total[/]:\n[bold font-size:30px]" + pieSeries.dataItem.values.value.sum + "[/]";
    })

}); // end am4core.ready()



}


async function plotargraficoMediaCpu(idMaquina)
{

  dadosCPU = [];

  for (let contadorCPU = 1; contadorCPU < 8; contadorCPU++) {

    await fetch(`/agencias/obterDadosGraficoCPU/${idMaquina}/${contadorCPU}`, {
                    method: "post",
  
                  }).then(resposta => {
        
                    if (resposta.ok) {
        
                        resposta.json().then(json => {
                         //console.log(json);
                         //console.log(json[0])
                         // dadosCPU.push(json[0].media == null);
                          if (json[0].media == null) {
                            dadosCPU.push({
                          'data': json[0].data.substring(0, 10),
                          'mediaUsoCPU': 0
                        })
                          } else {
                            //console.log(json[contadorCPU-1]);     
                            dadosCPU.push({
                            'data': json[0].data.substring(0, 10),
                            'mediaUsoCPU': json[0].media.toFixed(0)
                          })
                          }
  
                                                  
                        });
        
                    } else {
        
                        console.log('Erro ao criar média!');
        
                        resposta.text().then(texto => {
                            console.error(texto);
                            //alert(texto);
                        });
                    }
                });    
  }

  setTimeout(() => {
    am4core.ready(function () {

// Themes begin
am4core.useTheme(am4themes_dark);
am4core.useTheme(am4themes_animated);
// Themes end

// Create chart instance
var chart = am4core.create("chartCPU", am4charts.XYChart);

// Add data
chart.data = [{
  "date": dadosCPU[6].data,
  "value": dadosCPU[6].mediaUsoCPU
}, {
  "date": dadosCPU[5].data,
  "value": dadosCPU[5].mediaUsoCPU
}, {
  "date": dadosCPU[4].data,
  "value": dadosCPU[4].mediaUsoCPU
}, {
  "date": dadosCPU[3].data,
  "vale": dadosCPU[3].mediaUsoCPU
}, {
  "date": dadosCPU[2].data,
  "value": dadosCPU[2].mediaUsoCPU
}, {
  "date": dadosCPU[1].data,
  "value": dadosCPU[1].mediaUsoCPU
}, {
  "date": dadosCPU[0].data,
  "value": dadosCPU[0].mediaUsoCPU
}
];

// Set input format for the dates
chart.dateFormatter.inputDateFormat = "yyyy-MM-dd";

// Create axes
var dateAxis = chart.xAxes.push(new am4charts.DateAxis());
var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());

// Create series
var series = chart.series.push(new am4charts.LineSeries());
series.dataFields.valueY = "value";
series.dataFields.dateX = "date";
series.tooltipText = "Uso da cpu: {value}%"
series.strokeWidth = 2;
series.minBulletDistance = 15;

// Drop-shaped tooltips
series.tooltip.background.cornerRadius = 20;
series.tooltip.background.strokeOpacity = 0;
series.tooltip.pointerOrientation = "vertical";
series.tooltip.label.minWidth = 40;
series.tooltip.label.minHeight = 20;
series.tooltip.label.textAlign = "middle";
series.tooltip.label.textValign = "middle";

// Make bullets grow on hover
var bullet = series.bullets.push(new am4charts.CircleBullet());
bullet.circle.strokeWidth = 2;
bullet.circle.radius = 4;
bullet.circle.fill = am4core.color("#fff");

var bullethover = bullet.states.create("hover");
bullethover.properties.scale = 1.3;

// Make a panning cursor
chart.cursor = new am4charts.XYCursor();
chart.cursor.behavior = "panXY";
chart.cursor.xAxis = dateAxis;
chart.cursor.snapToSeries = series;

// Create vertical scrollbar and place it before the value axis
chart.scrollbarY = new am4core.Scrollbar();
chart.scrollbarY.parent = chart.leftAxesContainer;
chart.scrollbarY.toBack();

// Create a horizontal scrollbar with previe and place it underneath the date axis
chart.scrollbarX = new am4charts.XYChartScrollbar();
chart.scrollbarX.series.push(series);
chart.scrollbarX.parent = chart.bottomAxesContainer;

dateAxis.start = 0.79;
dateAxis.keepSelection = true;


}); // end am4core.ready()
  }, 1000);
  
}

function plotarGraficoCpu()
{

  //for (let index = 0; index < idDasMaquinas.length; index++) {
       
    // fetch(`/agencias/obterDadosGraficoCPU/:idMaquina/:contadorCPU`, {
    //               method: "post",

    //             }).then(resposta => {
      
    //               if (resposta.ok) {
      
    //                   resposta.json().then(json => {
    //                   // dadosCPU.push({
    //                   //   'data': json[0].dataHora.substring(0, 10),
    //                   //   'usoCPU': json[0]
    //                   // })
    //                   console.log(json[0]);                        
                                                
    //                   });
      
    //               } else {
      
    //                   console.log('Erro ao criar média!');
      
    //                   resposta.text().then(texto => {
    //                       console.error(texto);
    //                       //alert(texto);
    //                   });
    //               }
    //           });
    
  //}



am4core.ready(function () {

  // Themes begin
  am4core.useTheme(am4themes_dark);
  am4core.useTheme(am4themes_animated);
  // Themes end

  // Create chart instance
  var chart = am4core.create("chartCPU", am4charts.XYChart);

  // Add data
  chart.data = [{
    "date": "2021-09-01",
    "value": 42
  }, {
    "date": "2021-09-02",
    "value": 23
  }, {
    "date": "2021-09-03",
    "value": 23
  }, {
    "date": "2021-09-04",
    "vale": 54
  }, {
    "date": "2021-09-05",
    "value": 65
  }, {
    "date": "2021-09-06",
    "value": 76
  }, {
    "date": "2021-09-07",
    "value": 23
  }
  ];

  // Set input format for the dates
  chart.dateFormatter.inputDateFormat = "yyyy-MM-dd";

  // Create axes
  var dateAxis = chart.xAxes.push(new am4charts.DateAxis());
  var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());

  // Create series
  var series = chart.series.push(new am4charts.LineSeries());
  series.dataFields.valueY = "value";
  series.dataFields.dateX = "date";
  series.tooltipText = "Uso da cpu: {value}%"
  series.strokeWidth = 2;
  series.minBulletDistance = 15;

  // Drop-shaped tooltips
  series.tooltip.background.cornerRadius = 20;
  series.tooltip.background.strokeOpacity = 0;
  series.tooltip.pointerOrientation = "vertical";
  series.tooltip.label.minWidth = 40;
  series.tooltip.label.minHeight = 20;
  series.tooltip.label.textAlign = "middle";
  series.tooltip.label.textValign = "middle";

  // Make bullets grow on hover
  var bullet = series.bullets.push(new am4charts.CircleBullet());
  bullet.circle.strokeWidth = 2;
  bullet.circle.radius = 4;
  bullet.circle.fill = am4core.color("#fff");

  var bullethover = bullet.states.create("hover");
  bullethover.properties.scale = 1.3;

  // Make a panning cursor
  chart.cursor = new am4charts.XYCursor();
  chart.cursor.behavior = "panXY";
  chart.cursor.xAxis = dateAxis;
  chart.cursor.snapToSeries = series;

  // Create vertical scrollbar and place it before the value axis
  chart.scrollbarY = new am4core.Scrollbar();
  chart.scrollbarY.parent = chart.leftAxesContainer;
  chart.scrollbarY.toBack();

  // Create a horizontal scrollbar with previe and place it underneath the date axis
  chart.scrollbarX = new am4charts.XYChartScrollbar();
  chart.scrollbarX.series.push(series);
  chart.scrollbarX.parent = chart.bottomAxesContainer;

  dateAxis.start = 0.79;
  dateAxis.keepSelection = true;


}); // end am4core.ready()

}

function zerarGraficoCpu()
{
  


am4core.ready(function () {

  // Themes begin
  am4core.useTheme(am4themes_dark);
  am4core.useTheme(am4themes_animated);
  // Themes end

  // Create chart instance
  var chart = am4core.create("chartCPU", am4charts.XYChart);

  // Add data
  chart.data = [{
    "date": "0",
    "value": 0
  }
  ];

  // Set input format for the dates
  chart.dateFormatter.inputDateFormat = "yyyy-MM-dd";

  // Create axes
  var dateAxis = chart.xAxes.push(new am4charts.DateAxis());
  var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());

  // Create series
  var series = chart.series.push(new am4charts.LineSeries());
  series.dataFields.valueY = "value";
  series.dataFields.dateX = "date";
  series.tooltipText = "Uso da cpu: {value}%"
  series.strokeWidth = 2;
  series.minBulletDistance = 15;

  // Drop-shaped tooltips
  series.tooltip.background.cornerRadius = 20;
  series.tooltip.background.strokeOpacity = 0;
  series.tooltip.pointerOrientation = "vertical";
  series.tooltip.label.minWidth = 40;
  series.tooltip.label.minHeight = 20;
  series.tooltip.label.textAlign = "middle";
  series.tooltip.label.textValign = "middle";

  // Make bullets grow on hover
  var bullet = series.bullets.push(new am4charts.CircleBullet());
  bullet.circle.strokeWidth = 2;
  bullet.circle.radius = 4;
  bullet.circle.fill = am4core.color("#fff");

  var bullethover = bullet.states.create("hover");
  bullethover.properties.scale = 1.3;

  // Make a panning cursor
  chart.cursor = new am4charts.XYCursor();
  chart.cursor.behavior = "panXY";
  chart.cursor.xAxis = dateAxis;
  chart.cursor.snapToSeries = series;

  // Create vertical scrollbar and place it before the value axis
  chart.scrollbarY = new am4core.Scrollbar();
  chart.scrollbarY.parent = chart.leftAxesContainer;
  chart.scrollbarY.toBack();

  // Create a horizontal scrollbar with previe and place it underneath the date axis
  chart.scrollbarX = new am4charts.XYChartScrollbar();
  chart.scrollbarX.series.push(series);
  chart.scrollbarX.parent = chart.bottomAxesContainer;

  dateAxis.start = 0.79;
  dateAxis.keepSelection = true;


}); // end am4core.ready()

}

function zerarGraficoDisco()
{



am4core.ready(function () {

    // Themes begin
    am4core.useTheme(am4themes_dark);
    am4core.useTheme(am4themes_animated);
    // Themes end

    // Create chart instance
    var chart = am4core.create("chartdivDisco", am4charts.PieChart);
    chart.startAngle = 0;
    chart.endAngle = 0;

    // Let's cut a hole in our Pie chart the size of 40% the radius
    chart.innerRadius = am4core.percent(40);

    // Add data
    chart.data = [
        {
            "country": "Livre",
            "litres": 0,
            "bottles": 0
        },

        //   {  "country": "Ireland",
        //     "litres": 201.1,
        //     "bottles": 785
        // }, {
        //     "country": "Germany",
        //     "litres": 165.8,
        //     "bottles": 255
        // 
        {
            "country": "Em uso",
            "litres": 400,
            "bottles": 400
        }
        // , {
        //     "country": "Austria",
        //     "litres": 128.3,
        //     "bottles": 332
        // }, {
        //     "country": "UK",
        //     "litres": 99,
        //     "bottles": 150
        // }, {
        //     "country": "Belgium",
        //     "litres": 60,
        //     "bottles": 178
        // }, {
        //     "country": "The Netherlands",
        //     "litres": 50,
        //     "bottles": 50
        // }
    ];

    // Add and configure Series
    var pieSeries = chart.series.push(new am4charts.PieSeries());
    pieSeries.dataFields.value = "litres";
    pieSeries.dataFields.category = "country";
    pieSeries.slices.template.stroke = new am4core.InterfaceColorSet().getFor("background");
    pieSeries.slices.template.strokeWidth = 1;
    pieSeries.slices.template.strokeOpacity = 1;

    // Disabling labels and ticks on inner circle
    pieSeries.labels.template.disabled = true;
    pieSeries.ticks.template.disabled = true;

    // Disable sliding out of slices
    pieSeries.slices.template.states.getKey("hover").properties.shiftRadius = 0;
    pieSeries.slices.template.states.getKey("hover").properties.scale = 1;
    pieSeries.radius = am4core.percent(40);
    pieSeries.innerRadius = am4core.percent(30);

    var cs = pieSeries.colors;
    cs.list = [am4core.color(new am4core.ColorSet().getIndex(0))];

    cs.stepOptions = {
        lightness: -0.05,
        hue: 0
    };
    cs.wrap = false;


    // Add second series
    var pieSeries2 = chart.series.push(new am4charts.PieSeries());
    pieSeries2.dataFields.value = "bottles";
    pieSeries2.dataFields.category = "country";
    pieSeries2.slices.template.stroke = new am4core.InterfaceColorSet().getFor("background");
    pieSeries2.slices.template.strokeWidth = 1;
    pieSeries2.slices.template.strokeOpacity = 1;
    pieSeries2.slices.template.states.getKey("hover").properties.shiftRadius = 0.05;
    pieSeries2.slices.template.states.getKey("hover").properties.scale = 1;

    pieSeries2.labels.template.disabled = true;
    pieSeries2.ticks.template.disabled = true;


    var label = chart.seriesContainer.createChild(am4core.Label);
    label.textAlign = "middle";
    label.horizontalCenter = "middle";
    label.verticalCenter = "middle";
    label.adapter.add("text", function (text, target) {
        return "[font-size:18px]total[/]:\n[bold font-size:30px]" + pieSeries.dataItem.values.value.sum + "[/]";
    })

}); // end am4core.ready()



}

function zerarGraficoRam()
{



am4core.ready(function () {

    // Themes begin
    am4core.useTheme(am4themes_dark);
    am4core.useTheme(am4themes_animated);
    // Themes end

    // Create chart instance


    var chart = am4core.create("chartRAM", am4charts.PieChart);

    // Set data
    var selected;
    var types = [{
        type: "Utilizado",
        percent: 0,
        color: chart.colors.getIndex(0),
        // subs: [{
        //     type: "Oil",
        //     percent: 15
        // }, {
        //     type: "Coal",
        //     percent: 35
        // }, {
        //     type: "Nuclear",
        //     percent: 20
        // }]
    }, {
        type: "Disponivel",
        percent: 0,
        color: chart.colors.getIndex(1),
        // subs: [{
        //     type: "Hydro",
        //     percent: 15
        // }, {
        //     type: "Wind",
        //     percent: 10
        // }, {
        //     type: "Other",
        //     percent: 5
        // }]
    }];

    // Add data
    chart.data = generateChartData();

    // Add and configure Series
    var pieSeries = chart.series.push(new am4charts.PieSeries());
    pieSeries.dataFields.value = "percent";
    pieSeries.dataFields.category = "type";
    pieSeries.slices.template.propertyFields.fill = "color";
    pieSeries.slices.template.propertyFields.isActive = "pulled";
    pieSeries.slices.template.strokeWidth = 0;

    function generateChartData() {
        var chartData = [];
        for (var i = 0; i < types.length; i++) {
            if (i == selected) {
                for (var x = 0; x < types[i].subs.length; x++) {
                    chartData.push({
                        type: types[i].subs[x].type,
                        percent: types[i].subs[x].percent,
                        color: types[i].color,
                        pulled: true
                    });
                }
            } else {
                chartData.push({
                    type: types[i].type,
                    percent: types[i].percent,
                    color: types[i].color,
                    id: i
                });
            }
        }
        return chartData;
    }

    pieSeries.slices.template.events.on("hit", function (event) {
        if (event.target.dataItem.dataContext.id != undefined) {
            selected = event.target.dataItem.dataContext.id;
        } else {
            selected = undefined;
        }
        chart.data = generateChartData();
    });

}); // end am4core.ready()

}


async function plotargraficoMediaRam(idMaquina)
{

  dadosRAM = [];

  for (let contadorRAM = 1; contadorRAM < 8; contadorRAM++) {

    await fetch(`/agencias/obterDadosGraficoMediaRam/${idMaquina}/${contadorRAM}`, {
                    method: "post",
  
                  }).then(resposta => {
        
                    if (resposta.ok) {
        
                        resposta.json().then(json => {
                         //console.log(json);
                         //console.log(json[0])
                         // dadosCPU.push(json[0].media == null);
                          if (json[0].media == null) {
                            dadosRAM.push({
                          'data': json[0].data.substring(0, 10),
                          'mediaUsoRAM': 0
                        })
                          } else {
                            //console.log(json[contadorCPU-1]);     
                            dadosRAM.push({
                            'data': json[0].data.substring(0, 10),
                            'mediaUsoRAM': json[0].media.toFixed(0)
                          })
                          }
  
                                                  
                        });
        
                    } else {
        
                        console.log('Erro ao criar média!');
        
                        resposta.text().then(texto => {
                            console.error(texto);
                            //alert(texto);
                        });
                    }
                });    
  }

  setTimeout(() => {
    am4core.ready(function () {

// Themes begin
am4core.useTheme(am4themes_dark);
am4core.useTheme(am4themes_animated);
// Themes end

// Create chart instance
var chart = am4core.create("chartMediaRam", am4charts.XYChart);

// Add data
chart.data = [{
  "date": dadosRAM[6].data,
  "value": dadosRAM[6].mediaUsoRAM
}, {
  "date": dadosRAM[5].data,
  "value": dadosRAM[5].mediaUsoRAM
}, {
  "date": dadosRAM[4].data,
  "value": dadosRAM[4].mediaUsoRAM
}, {
  "date": dadosRAM[3].data,
  "vale": dadosRAM[3].mediaUsoRAM
}, {
  "date": dadosRAM[2].data,
  "value": dadosRAM[2].mediaUsoRAM
}, {
  "date": dadosRAM[1].data,
  "value": dadosRAM[1].mediaUsoRAM
}, {
  "date": dadosRAM[0].data,
  "value": dadosRAM[0].mediaUsoRAM
}
];

// Set input format for the dates
chart.dateFormatter.inputDateFormat = "yyyy-MM-dd";

// Create axes
var dateAxis = chart.xAxes.push(new am4charts.DateAxis());
var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());

// Create series
var series = chart.series.push(new am4charts.LineSeries());
series.dataFields.valueY = "value";
series.dataFields.dateX = "date";
series.tooltipText = "Uso da ram: {value}GB"
series.strokeWidth = 2;
series.minBulletDistance = 15;

// Drop-shaped tooltips
series.tooltip.background.cornerRadius = 20;
series.tooltip.background.strokeOpacity = 0;
series.tooltip.pointerOrientation = "vertical";
series.tooltip.label.minWidth = 40;
series.tooltip.label.minHeight = 20;
series.tooltip.label.textAlign = "middle";
series.tooltip.label.textValign = "middle";

// Make bullets grow on hover
var bullet = series.bullets.push(new am4charts.CircleBullet());
bullet.circle.strokeWidth = 2;
bullet.circle.radius = 4;
bullet.circle.fill = am4core.color("#fff");

var bullethover = bullet.states.create("hover");
bullethover.properties.scale = 1.3;

// Make a panning cursor
chart.cursor = new am4charts.XYCursor();
chart.cursor.behavior = "panXY";
chart.cursor.xAxis = dateAxis;
chart.cursor.snapToSeries = series;

// Create vertical scrollbar and place it before the value axis
chart.scrollbarY = new am4core.Scrollbar();
chart.scrollbarY.parent = chart.leftAxesContainer;
chart.scrollbarY.toBack();

// Create a horizontal scrollbar with previe and place it underneath the date axis
chart.scrollbarX = new am4charts.XYChartScrollbar();
chart.scrollbarX.series.push(series);
chart.scrollbarX.parent = chart.bottomAxesContainer;

dateAxis.start = 0.79;
dateAxis.keepSelection = true;


}); // end am4core.ready()
  }, 1000);
  
}

async function plotargraficoMediaDisco(idMaquina)
{

  dadosDISCO = [];

  for (let contadorDISCO = 1; contadorDISCO < 8; contadorDISCO++) {

    await fetch(`/agencias/obterDadosGraficoMediaDisco/${idMaquina}/${contadorDISCO}`, {
                    method: "post",
  
                  }).then(resposta => {
        
                    if (resposta.ok) {
        
                        resposta.json().then(json => {
                         //console.log(json);
                         //console.log(json[0])
                         // dadosCPU.push(json[0].media == null);
                          if (json[0].media == null) {
                            dadosDISCO.push({
                          'data': json[0].data.substring(0, 10),
                          'mediaUsoDISCO': 0
                        })
                          } else {
                            //console.log(json[contadorCPU-1]);     
                            dadosDISCO.push({
                            'data': json[0].data.substring(0, 10),
                            'mediaUsoDISCO': json[0].media.toFixed(0)
                          })
                          }
  
                                                  
                        });
        
                    } else {
        
                        console.log('Erro ao criar média!');
        
                        resposta.text().then(texto => {
                            console.error(texto);
                            //alert(texto);
                        });
                    }
                });    
  }

  setTimeout(() => {
    am4core.ready(function () {

// Themes begin
am4core.useTheme(am4themes_dark);
am4core.useTheme(am4themes_animated);
// Themes end

// Create chart instance
var chart = am4core.create("chartMediaDisco", am4charts.XYChart);

// Add data
chart.data = [{
  "date": dadosDISCO[6].data,
  "value": dadosDISCO[6].mediaUsoDISCO
}, {
  "date": dadosDISCO[5].data,
  "value": dadosDISCO[5].mediaUsoDISCO
}, {
  "date": dadosDISCO[4].data,
  "value": dadosDISCO[4].mediaUsoDISCO
}, {
  "date": dadosDISCO[3].data,
  "vale": dadosDISCO[3].mediaUsoDISCO
}, {
  "date": dadosDISCO[2].data,
  "value": dadosDISCO[2].mediaUsoDISCO
}, {
  "date": dadosDISCO[1].data,
  "value": dadosDISCO[1].mediaUsoDISCO
}, {
  "date": dadosDISCO[0].data,
  "value": dadosDISCO[0].mediaUsoDISCO
}
];

// Set input format for the dates
chart.dateFormatter.inputDateFormat = "yyyy-MM-dd";

// Create axes
var dateAxis = chart.xAxes.push(new am4charts.DateAxis());
var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());

// Create series
var series = chart.series.push(new am4charts.LineSeries());
series.dataFields.valueY = "value";
series.dataFields.dateX = "date";
series.tooltipText = "Uso da disco: {value}GB"
series.strokeWidth = 2;
series.minBulletDistance = 15;

// Drop-shaped tooltips
series.tooltip.background.cornerRadius = 20;
series.tooltip.background.strokeOpacity = 0;
series.tooltip.pointerOrientation = "vertical";
series.tooltip.label.minWidth = 40;
series.tooltip.label.minHeight = 20;
series.tooltip.label.textAlign = "middle";
series.tooltip.label.textValign = "middle";

// Make bullets grow on hover
var bullet = series.bullets.push(new am4charts.CircleBullet());
bullet.circle.strokeWidth = 2;
bullet.circle.radius = 4;
bullet.circle.fill = am4core.color("#fff");

var bullethover = bullet.states.create("hover");
bullethover.properties.scale = 1.3;

// Make a panning cursor
chart.cursor = new am4charts.XYCursor();
chart.cursor.behavior = "panXY";
chart.cursor.xAxis = dateAxis;
chart.cursor.snapToSeries = series;

// Create vertical scrollbar and place it before the value axis
chart.scrollbarY = new am4core.Scrollbar();
chart.scrollbarY.parent = chart.leftAxesContainer;
chart.scrollbarY.toBack();

// Create a horizontal scrollbar with previe and place it underneath the date axis
chart.scrollbarX = new am4charts.XYChartScrollbar();
chart.scrollbarX.series.push(series);
chart.scrollbarX.parent = chart.bottomAxesContainer;

dateAxis.start = 0.79;
dateAxis.keepSelection = true;


}); // end am4core.ready()
  }, 1000);
  
}

function zerarGraficoMediaRam()
{
  


am4core.ready(function () {

  // Themes begin
  am4core.useTheme(am4themes_dark);
  am4core.useTheme(am4themes_animated);
  // Themes end

  // Create chart instance
  var chart = am4core.create("chartMediaRam", am4charts.XYChart);

  // Add data
  chart.data = [{
    "date": "0",
    "value": 0
  }
  ];

  // Set input format for the dates
  chart.dateFormatter.inputDateFormat = "yyyy-MM-dd";

  // Create axes
  var dateAxis = chart.xAxes.push(new am4charts.DateAxis());
  var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());

  // Create series
  var series = chart.series.push(new am4charts.LineSeries());
  series.dataFields.valueY = "value";
  series.dataFields.dateX = "date";
  series.tooltipText = "Uso da cpu: {value}%"
  series.strokeWidth = 2;
  series.minBulletDistance = 15;

  // Drop-shaped tooltips
  series.tooltip.background.cornerRadius = 20;
  series.tooltip.background.strokeOpacity = 0;
  series.tooltip.pointerOrientation = "vertical";
  series.tooltip.label.minWidth = 40;
  series.tooltip.label.minHeight = 20;
  series.tooltip.label.textAlign = "middle";
  series.tooltip.label.textValign = "middle";

  // Make bullets grow on hover
  var bullet = series.bullets.push(new am4charts.CircleBullet());
  bullet.circle.strokeWidth = 2;
  bullet.circle.radius = 4;
  bullet.circle.fill = am4core.color("#fff");

  var bullethover = bullet.states.create("hover");
  bullethover.properties.scale = 1.3;

  // Make a panning cursor
  chart.cursor = new am4charts.XYCursor();
  chart.cursor.behavior = "panXY";
  chart.cursor.xAxis = dateAxis;
  chart.cursor.snapToSeries = series;

  // Create vertical scrollbar and place it before the value axis
  chart.scrollbarY = new am4core.Scrollbar();
  chart.scrollbarY.parent = chart.leftAxesContainer;
  chart.scrollbarY.toBack();

  // Create a horizontal scrollbar with previe and place it underneath the date axis
  chart.scrollbarX = new am4charts.XYChartScrollbar();
  chart.scrollbarX.series.push(series);
  chart.scrollbarX.parent = chart.bottomAxesContainer;

  dateAxis.start = 0.79;
  dateAxis.keepSelection = true;


}); // end am4core.ready()

}

function zerarGraficoMediaDisco()
{
  


am4core.ready(function () {

  // Themes begin
  am4core.useTheme(am4themes_dark);
  am4core.useTheme(am4themes_animated);
  // Themes end

  // Create chart instance
  var chart = am4core.create("chartMediaDisco", am4charts.XYChart);

  // Add data
  chart.data = [{
    "date": "0",
    "value": 0
  }
  ];

  // Set input format for the dates
  chart.dateFormatter.inputDateFormat = "yyyy-MM-dd";

  // Create axes
  var dateAxis = chart.xAxes.push(new am4charts.DateAxis());
  var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());

  // Create series
  var series = chart.series.push(new am4charts.LineSeries());
  series.dataFields.valueY = "value";
  series.dataFields.dateX = "date";
  series.tooltipText = "Uso da cpu: {value}%"
  series.strokeWidth = 2;
  series.minBulletDistance = 15;

  // Drop-shaped tooltips
  series.tooltip.background.cornerRadius = 20;
  series.tooltip.background.strokeOpacity = 0;
  series.tooltip.pointerOrientation = "vertical";
  series.tooltip.label.minWidth = 40;
  series.tooltip.label.minHeight = 20;
  series.tooltip.label.textAlign = "middle";
  series.tooltip.label.textValign = "middle";

  // Make bullets grow on hover
  var bullet = series.bullets.push(new am4charts.CircleBullet());
  bullet.circle.strokeWidth = 2;
  bullet.circle.radius = 4;
  bullet.circle.fill = am4core.color("#fff");

  var bullethover = bullet.states.create("hover");
  bullethover.properties.scale = 1.3;

  // Make a panning cursor
  chart.cursor = new am4charts.XYCursor();
  chart.cursor.behavior = "panXY";
  chart.cursor.xAxis = dateAxis;
  chart.cursor.snapToSeries = series;

  // Create vertical scrollbar and place it before the value axis
  chart.scrollbarY = new am4core.Scrollbar();
  chart.scrollbarY.parent = chart.leftAxesContainer;
  chart.scrollbarY.toBack();

  // Create a horizontal scrollbar with previe and place it underneath the date axis
  chart.scrollbarX = new am4charts.XYChartScrollbar();
  chart.scrollbarX.series.push(series);
  chart.scrollbarX.parent = chart.bottomAxesContainer;

  dateAxis.start = 0.79;
  dateAxis.keepSelection = true;


}); // end am4core.ready()

}

  function mostrarCrud(){
    window.location.href = 'cadastroCaixa.html';
  }


</script>
​